<div class="message-input-container">
  <div class="input-wrapper">
    <textarea
      #messageTextarea
      [(ngModel)]="messageText"
      (input)="onInput()"
      (keydown)="onKeyDown($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
      placeholder="Type a message..."
      class="message-input"
      rows="1"
      maxlength="1000"
      [disabled]="isDisabled()"
    ></textarea>

    <button
      (click)="sendMessage()"
      [disabled]="!canSend()"
      class="send-button"
      [class.disabled]="!canSend()"
    >
      <svg
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="22" y1="2" x2="11" y2="13"></line>
        <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
      </svg>
    </button>
  </div>

  <div class="input-footer">
    @if (messageText().length > 0) {
      <span class="character-count">
      {{ messageText().length }}/1000
    </span>
    }

    @if (isTyping()) {
      <span class="typing-hint">
      Press Enter to send, Shift+Enter for new line
    </span>
    }
  </div>
</div>
