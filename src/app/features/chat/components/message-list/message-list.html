<div class="message-list-container" #messageContainer>
  @if (messages().length > 0) {
    <div class="messages">
      @for (message of messages(); track message.id) {
        <div
          class="message-item"
          [class.own-message]="message.userId === currentUserId()"
        >
          <div class="message-content">
            @if (message.userId !== currentUserId()) {
              <div class="message-header">
                <span class="sender-name">{{ message.userName }}</span>
                <span class="message-time">{{ formatTime(message.timestamp) }}</span>
              </div>
            }

            <div class="message-bubble">
              <p class="message-text">{{ message.content }}</p>
              <span class="message-timestamp">{{ formatTime(message.timestamp) }}</span>
            </div>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <div class="empty-icon">
        <svg
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
        >
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
      </div>
      <h3 class="empty-title">Start a conversation</h3>
      <p class="empty-description">Send a message to begin chatting across your browser tabs</p>
    </div>
  }

  @if (typingUsers().length > 0) {
    <div class="typing-indicator">
      <div class="typing-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <span class="typing-text">{{ typingIndicatorText() }}</span>
    </div>
  }
</div>
